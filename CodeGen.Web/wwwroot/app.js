var templatingApp;!function(){"use strict";templatingApp=angular.module("templating_app",["ui.router"])}(),templatingApp.config(["$locationProvider","$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider","$compileProvider",function(e,t,n,o,a){window.history&&window.history.pushState&&e.html5Mode({enabled:!0,requireBase:!0}).hashPrefix("!"),o.strictMode(!1),a.debugInfoEnabled(!1),t.state("home",{url:"/",templateUrl:"./views/home/home.html",controller:"HomeController"}).state("about",{url:"/about",templateUrl:"./views/about/about.html",controller:"AboutController"}),n.otherwise("/home")}]),templatingApp.controller("AboutController",["$scope","$http",function(e,t){e.title="About Page"}]),templatingApp.controller("HomeController",["$scope","$http",function(o,n){o.dbId=0,o.dbname=null,o.tableInfo=null,o.collist=[],o.isCheckAll=0,o.colmaplist=[],o.copySuccess=function(){console.log("Copied!")},o.copyFail=function(e){console.error("Error!",e)},$("#checkAll").click(function(){$("input:checkbox").not(this).prop("checked",this.checked);var e=$('#checkboxes input:checked[name="coList[]"]').map(function(){return $(this).val()}).get().length;if(0<e)for(var t=1;t<=e;t++){var n=document.getElementById("chkc_"+t);angular.element(n).triggerHandler("click")}else o.collist=[]}),n({method:"GET",url:"/api/Codegen/GetDatabaseList"}).then(function(e){o.dblist=e.data},function(e){console.log(e)}),o.getAllTable=function(e){o.dbId=e.databaseId,o.dbname=e.databaseName,o.dbModel={DatabaseId:e.databaseId,DatabaseName:e.databaseName},n({method:"POST",url:"/api/Codegen/GetDatabaseTableList",data:o.dbModel}).then(function(e){o.tblist=e.data},function(e){console.log(e)})},o.getAllTableColumn=function(t){o.dbModel={DatabaseId:o.dbId,DatabaseName:o.dbname,TableId:t.tableId,TableName:t.tableName},n({method:"POST",url:"/api/Codegen/GetDatabaseTableColumnList",data:o.dbModel}).then(function(e){o.tableInfo=t,o.colist=e.data,o.colmaplist=e.data},function(e){console.log(e)})},o.getColumn=function(e,t){if(t){"Not exist"==a(e.columnId,o.collist)&&o.collist.push({ColumnId:e.columnId,ColumnName:e.columnName,MapColumnName:"",DataType:e.dataType,MaxLength:e.maxLength,IsNullable:e.isNullable,TableSchema:e.tableSchema,Tablename:e.tablename,ColumnDescription:e.columnDescription})}else{var n=o.collist.indexOf(e.ColumnId);-1<n&&o.collist.splice(n,1)}},o.generate=function(){$('.nav-tabs a[href="#model"]').tab("show");var t=[];0<o.collist.length?n({method:"POST",url:"/api/Codegen/GenerateCode",data:{table:o.tableInfo,columns:o.collist},dataType:"json",contentType:"application/json; charset=utf-8"}).then(function(e){$("#genCodeSql").text(""),$("#genCodeVm").text(""),$("#genCodeVu").text(""),$("#genCodeAngular").text(""),$("#genCodeAPI").text(""),$("#genCodeService").text(""),$("#genCodeInterface").text(""),(t=e.data).hasOwnProperty("View")&&(document.getElementById("genCodeVu").innerHTML+=t.View+"\r\n"),t.hasOwnProperty("NG")&&(document.getElementById("genCodeAngular").innerHTML+=t.NG+"\r\n"),t.hasOwnProperty("APIGet")&&(document.getElementById("genCodeAPI").innerHTML+=t.APIGet+"\r\n"),t.hasOwnProperty("DbModel")&&(document.getElementById("genCodeVm").innerHTML+=t.DbModel+"\r\n"),t.hasOwnProperty("SP")&&(document.getElementById("genCodeSql").innerHTML+=t.SP+"\r\n\r\n"),t.hasOwnProperty("Service")&&(document.getElementById("genCodeService").innerHTML+=t.Service+"\r\n\r\n"),t.hasOwnProperty("Interface")&&(document.getElementById("genCodeInterface").innerHTML+=t.Interface+"\r\n\r\n")},function(e){console.log(e)}):(t=[],$("#genCodeSql").text(""),$("#genCodeVm").text(""),console.log("Please Choose a Column!!"))},o.generateAllTable=function(){if($('.nav-tabs a[href="#markdown"]').tab("show"),null!=o.dbModel){var t=[];n({method:"POST",url:"/api/Codegen/GenerateAllTable",data:{database:o.dbModel}}).then(function(e){$("#genCodeMarkdown").text(""),(t=e.data).hasOwnProperty("Markdown")&&(document.getElementById("genCodeMarkdown").innerHTML+=t.Markdown+"\r\n")},function(e){console.log(e)})}else console.log("Please Choose a Database!!")},o.reset=function(){o.collist=[],rowGen=[],$("#genCodeSql").text(""),$("#genCodeVm").text("")};var a=function(e,t){for(var n="Not exist",o=0;o<t.length;o++){if(t[o].columnId==e){n="Exist";break}}return n}}]),templatingApp.directive("fixedSidebarleft",function(){return{restrict:"EA",templateUrl:"views/shared/sidebar/menu.html"}}),templatingApp.directive("topNavbarmenu",function(){return{restrict:"EA",templateUrl:"views/shared/navbar/nav.html"}});